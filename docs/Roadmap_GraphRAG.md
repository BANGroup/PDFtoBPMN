# Roadmap: Ğ¾Ñ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ´Ğ¾ Graph RAG

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.2  
> **Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ:** 27.01.2026  
> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ğ­Ğ¢ĞĞŸ 0 Ğ—ĞĞ’Ğ•Ğ Ğ¨ĞĞ â†’ Ğ’ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ (Ğ­Ñ‚Ğ°Ğ¿ 1)

---

## âš ï¸ ĞŸĞ Ğ˜ĞĞ¦Ğ˜ĞŸ ĞĞ‘Ğ ĞĞ¢ĞĞĞ™ Ğ¡ĞĞ’ĞœĞ•Ğ¡Ğ¢Ğ˜ĞœĞĞ¡Ğ¢Ğ˜

**Ğ’Ğ¡Ğ• Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ´Ğ°!**

### ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```python
# 1. Factory Pattern â€” Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
class OCRServiceFactory:
    @staticmethod
    def create(service_type: str = "deepseek") -> OCRService:
        if service_type == "deepseek":
            return DeepSeekOCRService()  # âœ… Ğ¡Ñ‚Ğ°Ñ€Ğ¾Ğµ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)
        elif service_type == "qwen":
            return QwenVLService()       # ğŸ†• ĞĞ¾Ğ²Ğ¾Ğµ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
        elif service_type == "paddle":
            return PaddleOCRService()    # Fallback

# 2. Feature Flags â€” Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
ENABLE_LAYOUT_DETECTION = os.getenv("ENABLE_LAYOUT_DETECTION", "false") == "true"
ENABLE_QWEN_OCR = os.getenv("ENABLE_QWEN_OCR", "false") == "true"

# 3. Graceful Degradation â€” Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ±ĞµĞ· Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
try:
    from doclayout_yolo import YOLOv10
    DOCLAYOUT_AVAILABLE = True
except ImportError:
    DOCLAYOUT_AVAILABLE = False
    print("âš ï¸ DocLayout-YOLO Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸")
```

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹

| ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|----------|
| **ĞĞµ Ğ»Ğ¾Ğ¼Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞµ** | Ğ’ÑĞµ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ |
| **ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸** | ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ â€” Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹, graceful degradation |
| **Feature flags** | ĞĞ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ÑÑ ÑĞ²Ğ½Ğ¾ (env/config) |
| **Ğ¢ĞµÑÑ‚Ñ‹ Ğ¿ĞµÑ€ĞµĞ´ merge** | ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑÑ‚Ğ°Ğ¿ Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸ ÑÑ‚Ğ°Ñ€Ğ¾Ğ³Ğ¾ + Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ |
| **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ** | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒ README Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹ |

---

## ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

- [ĞĞ±Ğ·Ğ¾Ñ€](#Ğ¾Ğ±Ğ·Ğ¾Ñ€)
- [Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ](#Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ)
- [Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²](#Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ-Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²)
- [ĞŸĞ»Ğ°Ğ½ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ](#Ğ¿Ğ»Ğ°Ğ½-Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ)
- [Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸](#Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)

---

## ĞĞ±Ğ·Ğ¾Ñ€

Ğ”Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ°Ğ½ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Obligations Ğ¾Ñ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² + Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ BPMN) Ğ´Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ **Graph RAG** Ñ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼ Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğµ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹.

### Ğ¦ĞµĞ»Ğ¸

1. **Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°** â€” Ğ²Ğ½ĞµĞ´Ñ€Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ VLM-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
2. **ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹** â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¸Ğ· RACI/Pipeline/BPMN
3. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ RAG-ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ** â€” Ğ³Ğ¸Ğ±Ñ€Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº (Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ + Ğ³Ñ€Ğ°Ñ„Ğ¾Ğ²Ñ‹Ğ¹)
4. **ĞĞ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ñ‚ÑŒ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** â€” Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‚Ñ‹ÑÑÑ‡ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

### Timeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¢Ğ•ĞšĞ£Ğ©Ğ•Ğ• Ğ¡ĞĞ¡Ğ¢ĞĞ¯ĞĞ˜Ğ•                                                  â”‚
â”‚  âœ… PDF/DOCX/XLSX ÑĞºÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ (PyMuPDF, python-docx, openpyxl)      â”‚
â”‚  âœ… DeepSeek-OCR Ğ´Ğ»Ñ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸                                        â”‚
â”‚  âœ… IR (Intermediate Representation)                                â”‚
â”‚  âœ… RACI/Pipeline/BPMN Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ                                    â”‚
â”‚  âŒ Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ VLM Ğ´Ğ»Ñ OCR                                         â”‚
â”‚  âŒ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹                            â”‚
â”‚  âŒ Ğ“Ñ€Ğ°Ñ„ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹                                                     â”‚
â”‚  âŒ RAG-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                               â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  2-3 Ğ´Ğ½Ñ         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  1 Ğ½ĞµĞ´ĞµĞ»Ñ          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ­Ğ¢ĞĞŸ 0  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚ Ğ­Ğ¢ĞĞŸ 1  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚ Ğ­Ğ¢ĞĞŸ 2  â”‚
â”‚ Quick   â”‚                  â”‚ Data    â”‚                    â”‚ Basic   â”‚
â”‚ Wins    â”‚                  â”‚ Layer   â”‚                    â”‚ Graph   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  2 Ğ½ĞµĞ´ĞµĞ»Ğ¸        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸
â”‚ Ğ­Ğ¢ĞĞŸ 3  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚ Ğ­Ğ¢ĞĞŸ 4  â”‚
â”‚ Vector  â”‚                  â”‚ Graph   â”‚
â”‚ RAG     â”‚                  â”‚ RAG     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: 6-9 Ğ½ĞµĞ´ĞµĞ»ÑŒ** Ğ´Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Graph RAG.

---

## Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

```
DocumentToContextPipeline
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Format Detection â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼           â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PDF   â”‚ â”‚  DOCX   â”‚ â”‚  XLSX   â”‚
â”‚Extractorâ”‚ â”‚Extractorâ”‚ â”‚Extractorâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚
     â”‚     PyMuPDF      python-docx    openpyxl
     â”‚     pdfplumber
     â”‚           â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  IRBuilder  â”‚  â—„â”€â”€ ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚StructureAnalyzerâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚MarkdownFormatterâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–¼
     Output: _OCR.md
```

### Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ OCR ÑÑ‚ĞµĞº

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-----------|------------|------------|
| **Native text** | PyMuPDF | Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¸Ğ· PDF |
| **Tables** | pdfplumber | Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† |
| **Graphics OCR** | DeepSeek-OCR | Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼, ÑÑ…ĞµĞ¼ |
| **Layout** | Ğ­Ğ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ | ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ |

### ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

1. **DeepSeek-OCR** â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ GPU, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
2. **ĞĞµÑ‚ layout detection** â€” ÑĞ²Ñ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ ML-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
3. **ĞĞµÑ‚ table detection** â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ pdfplumber (rule-based)
4. **ĞĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹** â€” Ñ€Ğ¾Ğ»Ğ¸/Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ÑÑ‚ÑÑ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ

---

## Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

### A. VLM Ğ´Ğ»Ñ OCR Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (State of the Art 2025-2026)

#### Ğ¢Ğ¾Ğ¿-Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¿Ğ¾ OmniDocBench (CVPR 2025)

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ | Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ | ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ | Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ |
|--------|-----------|----------|-------------|----------|
| **Qwen2.5-VL** | 7B-72B | ~75% JSON | Ğ›Ğ¸Ğ´ĞµÑ€ open-source, multi-language | Apache 2.0 |
| **olmOCR** | 7B | ~73% | ĞĞ° Ğ±Ğ°Ğ·Ğµ Qwen2-VL, $190/1M ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† | Apache 2.0 |
| **InternVL2** | 1B-108B | ~72% | 8K ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚, Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°, Ğ²Ğ¸Ğ´ĞµĞ¾ | Apache 2.0 |
| **GOT-OCR 2.0** | 580M | ~70% | ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ°Ñ, Ğ±Ñ‹ÑÑ‚Ñ€Ğ°Ñ | MIT |
| **Mistral-OCR** | - | 72.2% | Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ´Ğ»Ñ OCR | - |

#### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ

**Qwen2.5-VL-7B** Ğ¸Ğ»Ğ¸ **olmOCR** â€” Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°/ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ñ:
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Markdown output
- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹, Ñ€ÑƒĞºĞ¾Ğ¿Ğ¸ÑĞ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚
- Multi-column layouts
- ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ²ĞµÑĞ° Ğ¸ ĞºĞ¾Ğ´

### B. Layout Detection (Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¼Ğ°ĞºĞµÑ‚Ğ°)

#### Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | mAP | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ |
|--------|-----|----------|-------------|------------|
| **DocLayout-YOLO** | 79.7% | 120 FPS | Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² | âœ… Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ |
| **YOLO v12** | 76.2%* | 100 FPS | Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ°Ñ, Ğ½Ğ¾Ğ²Ğ°Ñ | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ´Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ |
| **YOLO v11** | 74.5% | 130 FPS | Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ, production | ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ° |
| **LayoutLMv3** | 78.3% | 15 FPS | Transformer-based | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ |
| **Surya** | 75%* | 80 FPS | Multilingual OCR+Layout | ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ |

*ĞĞ° DocLayNet dataset

#### DocLayout-YOLO â€” Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸

```python
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
pip install doclayout-yolo

# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
from doclayout_yolo import YOLOv10

model = YOLOv10("doclayout_yolo_docstructbench_imgsz1024.pt")
results = model.predict("document.png", imgsz=1024)

# ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸: text, title, figure, table, caption, etc.
```

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:**
- 19 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹ layout (text, title, figure, table, caption, list, footer, header...)
- ĞŸÑ€ĞµĞ´Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ½Ğ°Ñ Ğ½Ğ° DocSynth-300K
- Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ (YOLO backbone)
- Open source (AGPL-3.0)

### C. Table Detection & Structure Recognition

| Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ | Accuracy | Ğ¢Ğ¸Ğ¿ | ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ |
|------------|----------|-----|-------------|
| **PP-StructureV2 (SLANeXt)** | 69.65% | Rule+ML | PaddlePaddle, wired/wireless tables |
| **Table Transformer (TATR)** | 82.3% | Transformer | Microsoft, DETR-based |
| **DocLayout-YOLO** | 75.2% | YOLO | Ğ”ĞµÑ‚ĞµĞºÑ†Ğ¸Ñ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ† Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† |
| **Marker** | ~70% | Hybrid | ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ PDFâ†’Markdown |

#### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ

**Table Transformer (TATR)** Ğ´Ğ»Ñ structure recognition + **DocLayout-YOLO** Ğ´Ğ»Ñ detection.

### D. ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ (Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ PDF)

| Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ | ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´ | ĞŸĞ»ÑÑÑ‹ | ĞœĞ¸Ğ½ÑƒÑÑ‹ |
|---------|--------|-------|--------|
| **Docling** (IBM) | Pipeline | Ğ’ÑĞµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹, LF standard | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° |
| **Marker** | Hybrid | ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹, Markdown output | ĞœĞµĞ´Ğ»ĞµĞ½Ğ½ĞµĞµ VLM |
| **MinerU** | Pipeline | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ GPU |
| **Unstructured** | Pipeline | Enterprise-ready | ĞŸÑ€Ğ¾Ğ¿Ñ€Ğ¸ĞµÑ‚Ğ°Ñ€Ğ½Ñ‹Ğ¹ |
| **olmOCR** | VLM | Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹, Ğ´ĞµÑˆĞµĞ²Ñ‹Ğ¹ | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ PDF |

### E. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğ¹ ÑÑ‚ĞµĞº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ•ĞœĞ«Ğ™ Ğ¡Ğ¢Ğ•Ğš                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. Layout Detection:  DocLayout-YOLO                   â”‚
â”‚     - 19 ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹, Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹, open source                â”‚
â”‚                                                         â”‚
â”‚  2. OCR Engine:        Qwen2.5-VL-7B Ğ¸Ğ»Ğ¸ olmOCR         â”‚
â”‚     - Ğ—Ğ°Ğ¼ĞµĞ½Ğ° DeepSeek-OCR                               â”‚
â”‚     - Markdown output, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹                 â”‚
â”‚                                                         â”‚
â”‚  3. Table Structure:   Table Transformer (TATR)         â”‚
â”‚     - Ğ¢Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‡ĞµĞµĞº                        â”‚
â”‚                                                         â”‚
â”‚  4. Fallback OCR:      PaddleOCR (CPU)                  â”‚
â”‚     - ĞšĞ¾Ğ³Ğ´Ğ° GPU Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½                              â”‚
â”‚                                                         â”‚
â”‚  5. ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°:      Docling                          â”‚
â”‚     - Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ²ÑĞµÑ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²               â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ĞŸĞ»Ğ°Ğ½ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ

### Ğ­Ğ¢ĞĞŸ 0: Quick Wins (2-3 Ğ´Ğ½Ñ) âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•Ğ

**Ğ¦ĞµĞ»ÑŒ:** Ğ£Ğ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾ Ğ³Ñ€Ğ°Ñ„Ğ°.

#### 0.1 Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ DocLayout-YOLO âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** `scripts/pdf_to_context/extractors/layout_detector.py`

```python
from scripts.pdf_to_context.extractors import get_layout_detector

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€ (graceful degradation)
LayoutDetector, is_available = get_layout_detector()

if is_available():
    detector = LayoutDetector(confidence_threshold=0.25)
    elements = detector.detect(image_bytes, page_num=0)
    
    for elem in elements:
        print(f"{elem.category.value}: {elem.confidence:.2f}")
```

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹:**
- [x] `scripts/pdf_to_context/extractors/layout_detector.py` â€” âœ… ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [x] `scripts/pdf_to_context/extractors/__init__.py` â€” âœ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½
- [ ] `scripts/pdf_to_context/pipeline.py` â€” Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ (ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³)

#### 0.2 ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ VLM OCR (Qwen2.5-VL) âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** `scripts/pdf_to_context/ocr_service/qwen_service.py`

```python
from scripts.pdf_to_context.ocr_service.factory import OCRServiceFactory

# Ğ¯Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Qwen VL
service = OCRServiceFactory.create(service_type="qwen")

# Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· list_available_services()
services = OCRServiceFactory.list_available_services()
print(services)  # {'deepseek': {...}, 'paddle': {...}, 'qwen': {...}}
```

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹:**
- [x] `scripts/pdf_to_context/ocr_service/qwen_service.py` â€” âœ… ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [x] `scripts/pdf_to_context/ocr_service/factory.py` â€” âœ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½

#### 0.3 Ğ¢ĞµÑÑ‚Ñ‹ âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** `scripts/tests/test_stage0_components.py`

```bash
python3 scripts/tests/test_stage0_components.py
# Ran 15 tests in 0.406s - OK
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ¾:**
- [x] LayoutDetector graceful degradation
- [x] QwenVLService graceful degradation  
- [x] OCRServiceFactory Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
- [x] Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚

#### 0.4 Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ venv âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** `venv/` Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ RTX 5080 (Blackwell, sm_120)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞµÑ€ÑĞ¸Ñ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----------|--------|--------|
| **PyTorch** | 2.10.0+cu129 | âœ… ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° sm_120 |
| **CUDA** | 12.9 | âœ… ĞĞ°Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ |
| **transformers** | 5.0.0 | âœ… |
| **accelerate** | 1.12.0 | âœ… |
| **pdfplumber** | 0.11.9 | âœ… |

```bash
# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
cd /home/budnik_an/Obligations
source venv/bin/activate
python3 scripts/utils/run_document.py input/document.pdf
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ¾:**
- [x] PyTorch Ğ²Ğ¸Ğ´Ğ¸Ñ‚ GPU Ğ±ĞµĞ· warnings
- [x] CUDA compute test Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚
- [x] Ğ’ÑĞµ 15 Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¸
- [x] Qwen VL OCR Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½

#### 0.5 Docker Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ OCR âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ OCR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ°                                       â”‚
â”‚  â”œâ”€â”€ qwen_local â†’ Qwen2-VL-2B (16GB VRAM)             â”‚
â”‚  â”œâ”€â”€ deepseek â†’ DeepSeek-OCR Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (8GB VRAM)      â”‚
â”‚  â”œâ”€â”€ qwen_remote â†’ Docker Qwen (7B+)                   â”‚
â”‚  â””â”€â”€ deepseek_remote â†’ Docker DeepSeek                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTP :8001 (Qwen)    â†“ HTTP :8000 (DeepSeek)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ»ÑĞ±Ğ°Ñ GPU: 4080/5080/5090/H100)       â”‚
â”‚  â”œâ”€â”€ qwen-vlm-service (Qwen2-VL-7B)                    â”‚
â”‚  â””â”€â”€ deepseek-ocr-service (DeepSeek-OCR 3B)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:**

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | Ğ¤Ğ°Ğ¹Ğ»Ñ‹ | ĞŸĞ¾Ñ€Ñ‚ |
|--------|-------|------|
| **Qwen VLM** | `docker/qwen-vlm-service/` | 8001 |

### Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° OCR (27.01.2026)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DOCKER (ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)                                        â”‚
â”‚  â””â”€â”€ Qwen2-VL-2B â†’ Ğ¿Ğ¾Ñ€Ñ‚ 8001                                  â”‚
â”‚      â€¢ default: Ada GPU (RTX 4080/4090)                        â”‚
â”‚      â€¢ blackwell: Blackwell GPU (RTX 5070/5080/5090)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ›ĞĞšĞĞ›Ğ¬ĞĞ«Ğ• Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡Ğ« (ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸)                      â”‚
â”‚  â”œâ”€â”€ DeepSeek-OCR â†’ Ğ¿Ğ¾Ñ€Ñ‚ 8000                                  â”‚
â”‚  â”‚   â€¢ Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ flash_attn (ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ Ğ¿Ğ¾Ğ´ GPU)                â”‚
â”‚  â”‚   â€¢ Ğ”Ğ°ĞµÑ‚ bbox ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹                                   â”‚
â”‚  â””â”€â”€ Qwen2-VL-7B â†’ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾                                   â”‚
â”‚      â€¢ Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ 24GB+ VRAM                                     â”‚
â”‚      â€¢ Ğ›ÑƒÑ‡ÑˆĞµĞµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Docker Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Qwen 2B):**

| ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ | VRAM | GPU | ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° |
|---------|------|-----|---------|
| **default** | ~5GB | Ada (RTX 4080/4090) | `docker compose up` |
| **blackwell** | ~5GB | Blackwell (RTX 5070/5080/5090) | `docker compose --profile blackwell up` |

**âš ï¸ DeepSeek Ğ¸ Qwen 7B â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾!**

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹:**
- DeepSeek Ğ±ĞµĞ· flash_attn â†’ CUDA OOM Ğ´Ğ°Ğ¶Ğµ Ğ½Ğ° 16GB
- Qwen 7B â†’ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ 24GB+ VRAM
- Qwen 2B Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· SDPA Ğ±ĞµĞ· flash_attn â†’ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ OCR ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:**

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Qwen 2B (Docker) | Qwen 7B (Local) | DeepSeek (Local) |
|----------|------------------|-----------------|------------------|
| VRAM | ~5GB | ~14GB | ~8GB |
| Flash Attention | ĞĞµ Ğ½ÑƒĞ¶ĞµĞ½ | ĞĞµ Ğ½ÑƒĞ¶ĞµĞ½ | **ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½** |
| Bbox ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ | âŒ | âŒ | âœ… |
| ĞšĞ¸Ñ€Ğ¸Ğ»Ğ»Ğ¸Ñ†Ğ° | âœ… | âœ… | âš ï¸ Ñ‚Ñ€Ğ°Ğ½ÑĞ»Ğ¸Ñ‚ |
| Docker | âœ… | âŒ | âŒ |
| Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | 1.95s | â€” | 1.29s |

**Factory API:**

```python
# Qwen (Docker Ğ¸Ğ»Ğ¸ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
ocr = OCRServiceFactory.create(service_type="qwen")

# DeepSeek (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹)
ocr = OCRServiceFactory.create(service_type="deepseek")
```

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Qwen:**
- [x] FastAPI ÑĞµÑ€Ğ²Ğ¸Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [x] Dockerfile Ğ³Ğ¾Ñ‚Ğ¾Ğ²
- [x] docker-compose.yml Ñ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑĞ¼Ğ¸ (default, blackwell)
- [x] QwenRemoteService ĞºĞ»Ğ¸ĞµĞ½Ñ‚
- [x] Factory Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½
- [x] Ğ’ÑĞµ 15 Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´ÑÑ‚
- [x] **Docker Ğ¾Ğ±Ñ€Ğ°Ğ· 2B-cu128 ÑĞ¾Ğ±Ñ€Ğ°Ğ½ Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ½Ğ° RTX 5080** âœ…
- [x] **Docker Desktop (Windows) Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½** âœ…
  - Docker Desktop 29.0.1 + WSL2
  - GPU passthrough Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ (RTX 5080)
  - OCR Ñ‚ĞµÑÑ‚: 1.95s, GPU Utilization 53%
  - Flash Attention: Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½ (Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ 2B)
- [ ] Ğ¢ĞµÑÑ‚ 7B Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ğ½Ğ° RTX 5090 (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ DeepSeek:**
- [x] **Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ DeepSeek â€” Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ** âœ…
  - flash_attn 2.7.3 + torch 2.9.0+cu128
  - OCR: 1.29s (Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Qwen)
  - BBox ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹: âœ…
  - ĞšĞ¸Ñ€Ğ¸Ğ»Ğ»Ğ¸Ñ†Ğ°: âš ï¸ Ñ‚Ñ€Ğ°Ğ½ÑĞ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ
- [x] Docker Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ñ‹ (flash_attn Ğ½ĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼ Ñ Docker)
- [x] Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ GPU:**

| GPU | VRAM | Docker | Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ |
|-----|------|--------|----------|
| RTX 5070 | 8GB | Qwen 2B (`blackwell`) | â€” |
| RTX 4080/5080 | 16GB | Qwen 2B + DeepSeek | Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚ |
| RTX 4090/5090 | 24GB | Qwen 7B + DeepSeek | ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ |
| H100/A100 | 40-80GB | Ğ’ÑĞµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ | Enterprise |

#### 0.6 ĞĞ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ IRBlock Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ (TODO)

```python
# Ğ Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ scripts/pdf_to_context/ir/models.py

@dataclass
class IRBlock:
    # ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ñ ...
    
    # ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ğ³Ñ€Ğ°Ñ„Ğ°
    entities: List[str] = field(default_factory=list)
    section_path: List[str] = field(default_factory=list)
    references: List[str] = field(default_factory=list)
    layout_category: str = ""  # ĞÑ‚ DocLayout-YOLO
```

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹:**
- [ ] `scripts/pdf_to_context/ir/models.py`
- [ ] `scripts/pdf_to_context/ir/section_extractor.py`

#### 0.7 Ğ“Ñ€Ğ°Ñ„ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¡ĞœĞš (Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ) âœ…

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:** `scripts/document_graph/` â€” ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¸ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼

**ĞœĞµÑ‚Ğ¾Ğ´Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ (Ğ¸Ğ· Ğ Ğš01-2017-07):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ ĞœĞ•ĞĞ•Ğ”Ğ–ĞœĞ•ĞĞ¢Ğ ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ğœ - ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ« ĞœĞ•ĞĞ•Ğ”Ğ–ĞœĞ•ĞĞ¢Ğ           â”‚  Ğ‘ - ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ« Ğ–Ğ˜Ğ—ĞĞ•ĞĞĞĞ“Ğ Ğ¦Ğ˜ĞšĞ›Ğ           â”‚
â”‚  â”œâ”€â”€ Ğœ1: ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ°            â”‚  â”œâ”€â”€ Ğ‘1: ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ·Ğ¾Ğº           â”‚
â”‚  â””â”€â”€ Ğœ2: ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°      â”‚  â”œâ”€â”€ Ğ‘5: Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ñ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ÑĞ¼Ğ¸  â”‚
â”‚                                     â”‚  â”œâ”€â”€ Ğ‘6: ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ   â”‚
â”‚  Ğ’ - ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ« ĞĞ‘Ğ•Ğ¡ĞŸĞ•Ğ§Ğ•ĞĞ˜Ğ¯           â”‚  â”œâ”€â”€ Ğ‘7: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºÑƒĞ¿ĞºĞ°Ğ¼Ğ¸            â”‚
â”‚  â”œâ”€â”€ Ğ’1: ĞĞ²Ğ¸Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ   â”‚  â””â”€â”€ Ğ‘8: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ĞµÑ‚Ğ°Ğ¼Ğ¸             â”‚
â”‚  â”œâ”€â”€ Ğ’2: Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²       â”‚                                          â”‚
â”‚  â”œâ”€â”€ Ğ’4: ĞœĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ°       â”‚  ĞšĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ¢Ğ˜ĞŸ-ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡.ĞĞĞœĞ•Ğ -Ğ’Ğ•Ğ Ğ¡Ğ˜Ğ¯   â”‚
â”‚  â”œâ”€â”€ Ğ’5: Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°             â”‚  ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ”ĞŸ-Ğœ1.020-06                    â”‚
â”‚  â”œâ”€â”€ Ğ’6: Ğ›ĞµÑ‚Ğ½Ğ°Ñ Ğ³Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¢Ğ Ğ’Ğ¡     â”‚          â”œâ”€â”€ Ğ”ĞŸ = Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°  â”‚
â”‚  â”œâ”€â”€ Ğ’7: ĞÑ…Ñ€Ğ°Ğ½Ğ° Ñ‚Ñ€ÑƒĞ´Ğ°               â”‚          â”œâ”€â”€ Ğœ1 = Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° + ĞŸÑ€Ğ¾Ñ†ĞµÑÑ       â”‚
â”‚  â””â”€â”€ Ğ’8: Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚   â”‚          â”œâ”€â”€ 020 = ĞĞ¾Ğ¼ĞµÑ€ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°       â”‚
â”‚                                     â”‚          â””â”€â”€ 06 = Ğ’ĞµÑ€ÑĞ¸Ñ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**

```bash
# ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
python3 scripts/document_graph/run_graph.py

# Ğ¡ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¸ĞµĞ¼ Ğ¿ÑƒÑ‚ĞµĞ¹
python3 scripts/document_graph/run_graph.py --input input2/BND/pdf --output output/my_graph
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ (27.01.2026):**

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|---------|----------|
| **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²** | 290 |
| **ĞŸÑ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²** | 14 |
| **Ğ£Ğ·Ğ»Ğ¾Ğ² Ğ³Ñ€Ğ°Ñ„Ğ°** | 307 |
| **Ğ¡Ğ²ÑĞ·ĞµĞ¹** | 231 |

**Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ğ¼:**
- ĞŸÑ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡ĞµĞ½Ğ¸Ñ (Ğ’): 123 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- ĞŸÑ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ° (Ğ‘): 50 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞŸÑ€Ğ¾Ñ†ĞµÑÑÑ‹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚Ğ° (Ğœ): 42 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°

**Ğ¢Ğ¾Ğ¿-5 Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²:**
1. Ğ’7 (ĞÑ…Ñ€Ğ°Ğ½Ğ° Ñ‚Ñ€ÑƒĞ´Ğ°): 63 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
2. Ğœ1 (ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ°): 41 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚
3. Ğ‘1 (ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ·Ğ¾Ğº): 26 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
4. Ğ’4 (ĞœĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ°): 23 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
5. Ğ’6 (Ğ›ĞµÑ‚Ğ½Ğ°Ñ Ğ³Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ): 19 Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹:**
- [x] `scripts/document_graph/__init__.py` â€” âœ…
- [x] `scripts/document_graph/models.py` â€” Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Document, Process, Graph)
- [x] `scripts/document_graph/parser.py` â€” Ğ¿Ğ°Ñ€ÑĞµÑ€ ĞºĞ¾Ğ´Ğ¾Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- [x] `scripts/document_graph/graph_builder.py` â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ³Ñ€Ğ°Ñ„Ğ° + HTML Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€
- [x] `scripts/document_graph/cli.py` â€” CLI Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
- [x] `scripts/document_graph/run_graph.py` â€” ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°

**Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹:**
- [x] `scripts/tools/graph_data.json` â€” Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ³Ñ€Ğ°Ñ„Ğ° (176KB)
- [x] `scripts/tools/graph_viewer.html` â€” Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€ (195KB)

**HTML Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€ (Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ):**
- Cytoscape.js Ğ´Ğ»Ñ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ° Ğ³Ñ€Ğ°Ñ„Ğ°
- Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğ¿Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ğ¼ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ² (Ğœ/Ğ‘/Ğ’)
- ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- ĞŸĞ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ° ÑĞ²ÑĞ·ĞµĞ¹ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ
- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
- Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°
- **Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ HTML** â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Ğ»ÑĞ±Ğ¾Ğ¼ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ

```
ğŸŒ ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ:
   file:///home/budnik_an/Obligations/scripts/tools/graph_viewer.html
```

---

### Ğ­Ğ¢ĞĞŸ 1: Data Layer (1 Ğ½ĞµĞ´ĞµĞ»Ñ)

**Ğ¦ĞµĞ»ÑŒ:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ Ğ³Ñ€Ğ°Ñ„Ğ°.

#### 1.1 ĞŸĞ°Ñ€ÑĞµÑ€Ñ‹ RACI/Pipeline/BPMN

| ĞŸĞ°Ñ€ÑĞµÑ€ | Ğ’Ñ…Ğ¾Ğ´ | Ğ’Ñ‹Ñ…Ğ¾Ğ´ |
|--------|------|-------|
| RACIParser | `*_RACI.md` | `List[RACIEntry]` |
| PipelineParser | `*_Pipeline.md` | `List[PipelineActivity]` |
| BPMNParser | `*.bpmn` | `List[BPMNElement], List[BPMNFlow]` |

```python
# scripts/graph/parsers/raci_parser.py

@dataclass
class RACIEntry:
    section: str      # "Ğ¿.7.2"
    activity: str     # "ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°"
    responsible: str  # Ğ Ğ¾Ğ»ÑŒ Ñ R
    accountable: str  # Ğ Ğ¾Ğ»ÑŒ Ñ A
    consulted: List[str]
    informed: List[str]
```

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹:**
- [ ] `scripts/graph/__init__.py`
- [ ] `scripts/graph/models.py`
- [ ] `scripts/graph/parsers/raci_parser.py`
- [ ] `scripts/graph/parsers/pipeline_parser.py`
- [ ] `scripts/graph/parsers/bpmn_parser.py`

#### 1.2 Ğ£Ğ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ³Ñ€Ğ°Ñ„Ğ°

```python
# scripts/graph/models.py

class NodeType(Enum):
    ROLE = "role"
    TASK = "task"
    DOCUMENT = "document"
    PROCESS = "process"
    SECTION = "section"
    GATEWAY = "gateway"

class EdgeType(Enum):
    PERFORMS = "performs"      # Ğ Ğ¾Ğ»ÑŒ â†’ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
    APPROVES = "approves"      # Ğ Ğ¾Ğ»ÑŒ â†’ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
    CREATES = "creates"        # Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° â†’ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚
    FOLLOWS = "follows"        # Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° â†’ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
    CONTAINS = "contains"      # ĞŸÑ€Ğ¾Ñ†ĞµÑÑ â†’ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
    REFERENCES = "references"  # Ğ Ğ°Ğ·Ğ´ĞµĞ» â†’ Ğ Ğ°Ğ·Ğ´ĞµĞ»

@dataclass
class ProcessGraph:
    nodes: List[GraphNode]
    edges: List[GraphEdge]
    metadata: Dict
```

---

### Ğ­Ğ¢ĞĞŸ 2: Basic Graph (1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ:** ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ³Ñ€Ğ°Ñ„ Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ Ğ¸Ğ· Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞµĞ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ….

#### 2.1 GraphBuilder

```python
# scripts/graph/builder.py

class GraphBuilder:
    def build_from_process(self, process_dir: str) -> ProcessGraph:
        # 1. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ RACI â†’ Ñ€Ğ¾Ğ»Ğ¸ + ÑĞ²ÑĞ·Ğ¸
        # 2. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Pipeline â†’ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ + Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
        # 3. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ BPMN â†’ flows + gateways
        # 4. ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ² ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ñ„
        pass
    
    def to_networkx(self, graph: ProcessGraph) -> nx.DiGraph:
        # ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
        pass
```

#### 2.2 Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```python
# scripts/graph/visualizer.py

class GraphVisualizer:
    def to_html(self, G: nx.DiGraph, output_path: str):
        # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ HTML Ñ‡ĞµÑ€ĞµĞ· pyvis
        pass
    
    def to_graphml(self, G: nx.DiGraph, output_path: str):
        # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ»Ñ Neo4j
        pass
```

#### 2.3 CLI

```bash
# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
python scripts/utils/build_graph.py output/Ğ”ĞŸ-Ğœ1.020-06 -o graph.html
```

---

### Ğ­Ğ¢ĞĞŸ 3: Vector RAG (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ RAG-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼.

#### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-----------|------------|------------|
| **Chunker** | LangChain / Custom | Ğ Ğ°Ğ·Ğ±Ğ¸ĞµĞ½Ğ¸Ğµ OCR Ğ½Ğ° Ñ‡Ğ°Ğ½ĞºĞ¸ |
| **Embeddings** | `intfloat/multilingual-e5-base` | Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
| **Vector Store** | ChromaDB | Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ² |
| **BM25** | `rank_bm25` | Ğ›ĞµĞºÑĞ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº |
| **Reranker** | `cross-encoder/ms-marco-MiniLM` | ĞŸĞµÑ€ĞµÑ€Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |

#### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
Query â†’ [BM25 + Dense] â†’ RRF Fusion â†’ Rerank â†’ Context â†’ LLM â†’ Answer
```

---

### Ğ­Ğ¢ĞĞŸ 4: Graph RAG (2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ:** ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Graph RAG Ñ Neo4j.

#### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-----------|------------|------------|
| **Graph Store** | Neo4j | Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ñ„Ğ° |
| **NER** | spaCy / Custom | Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹ |
| **Graph Retriever** | Cypher queries | Multi-hop Ğ¿Ğ¾Ğ¸ÑĞº |
| **Hybrid Fusion** | RRF | ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ vector + graph |

#### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° HybridRAG

```
Query
  â”‚
  â”œâ”€â”€â–º NER â†’ Entities â†’ Cypher Query â†’ Graph Results
  â”‚
  â””â”€â”€â–º Embedding â†’ Vector Search â†’ Dense Results
                    â”‚
                    â–¼
              RRF Fusion
                    â”‚
                    â–¼
              Cross-Encoder Rerank
                    â”‚
                    â–¼
               Context + LLM
                    â”‚
                    â–¼
                 Answer
```

---

## Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

### ĞĞ¾Ğ²Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (requirements.txt)

```txt
# Layout Detection
doclayout-yolo>=0.0.4

# VLM OCR (Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ° DeepSeek)
transformers>=4.40.0
qwen-vl-utils>=0.0.8

# Graph
networkx>=3.0
pyvis>=0.3.0
neo4j>=5.0.0

# RAG
chromadb>=0.4.0
sentence-transformers>=2.2.0
rank-bm25>=0.2.2

# NLP
spacy>=3.7.0

# Web UI
fastapi>=0.104.0
uvicorn>=0.24.0

# Optional
docling>=0.1.0  # ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€ÑĞµÑ€
```

### GPU Requirements

| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | VRAM | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|--------|------|------------|
| DocLayout-YOLO | 2 GB | Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ inference |
| Qwen2.5-VL-7B | 16 GB | ĞœĞ¾Ğ¶Ğ½Ğ¾ INT4 quantization |
| olmOCR | 14 GB | ĞĞ° Ğ±Ğ°Ğ·Ğµ Qwen2-VL |
| DeepSeek-OCR | 8 GB | Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ |

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```
scripts/
â”œâ”€â”€ pdf_to_context/          # âœ… Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
â”‚   â”œâ”€â”€ extractors/
â”‚   â”‚   â”œâ”€â”€ layout_detector.py    # ğŸ†• Ğ­Ğ¢ĞĞŸ 0
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ocr_service/
â”‚       â”œâ”€â”€ qwen_service.py       # ğŸ†• Ğ­Ğ¢ĞĞŸ 0
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ document_graph/          # âœ… Ğ­Ğ¢ĞĞŸ 0.7 â€” Ğ“Ñ€Ğ°Ñ„ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¡ĞœĞš
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py            # Document, Process, Graph Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”‚   â”œâ”€â”€ parser.py            # ĞŸĞ°Ñ€ÑĞµÑ€ ĞºĞ¾Ğ´Ğ¾Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
â”‚   â”œâ”€â”€ graph_builder.py     # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ³Ñ€Ğ°Ñ„Ğ° + HTML Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€
â”‚   â”œâ”€â”€ cli.py               # CLI Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â””â”€â”€ run_graph.py         # Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°
â”‚
â”œâ”€â”€ graph/                   # ğŸ†• Ğ­Ğ¢ĞĞŸ 1-2 â€” Ğ“Ñ€Ğ°Ñ„ Ğ¸Ğ· RACI/Pipeline/BPMN
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ builder.py
â”‚   â”œâ”€â”€ visualizer.py
â”‚   â”œâ”€â”€ neo4j_store.py       # Ğ­Ğ¢ĞĞŸ 4
â”‚   â””â”€â”€ parsers/
â”‚       â”œâ”€â”€ raci_parser.py
â”‚       â”œâ”€â”€ pipeline_parser.py
â”‚       â””â”€â”€ bpmn_parser.py
â”‚
â”œâ”€â”€ rag/                     # ğŸ†• Ğ­Ğ¢ĞĞŸ 3-4
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ chunker.py
â”‚   â”œâ”€â”€ vector_store.py
â”‚   â”œâ”€â”€ hybrid_retriever.py
â”‚   â”œâ”€â”€ graph_retriever.py   # Ğ­Ğ¢ĞĞŸ 4
â”‚   â”œâ”€â”€ reranker.py
â”‚   â””â”€â”€ pipeline.py
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ build_graph.py       # ğŸ†• Ğ­Ğ¢ĞĞŸ 2
    â”œâ”€â”€ rag_query.py         # ğŸ†• Ğ­Ğ¢ĞĞŸ 3
    â””â”€â”€ ...
```

---

## Ğ¡ÑÑ‹Ğ»ĞºĞ¸

### Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- [OmniDocBench (CVPR 2025)](https://arxiv.org/pdf/2412.07626) â€” Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€Ğº Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- [DocLayout-YOLO](https://arxiv.org/html/2410.12628v1) â€” layout detection
- [olmOCR](https://olmocr.allenai.org/blog) â€” ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ VLM OCR
- [HybridRAG (BlackRock & NVIDIA)](https://arxiv.org/abs/2408.xxxxx) â€” Ğ³Ñ€Ğ°Ñ„ + Ğ²ĞµĞºÑ‚Ğ¾Ñ€Ñ‹

### Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹

- [Qwen2.5-VL](https://huggingface.co/Qwen/Qwen2.5-VL-7B-Instruct)
- [DocLayout-YOLO](https://github.com/opendatalab/DocLayout-YOLO)
- [Docling](https://github.com/DS4SD/docling)
- [ChromaDB](https://www.trychroma.com/)
- [Neo4j](https://neo4j.com/)

---

**ĞĞ²Ñ‚Ğ¾Ñ€:** PDFtoBPMN Project  
**Ğ”Ğ°Ñ‚Ğ°:** 26.01.2026

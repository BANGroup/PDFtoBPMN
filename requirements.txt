# Requirements for BPMN Process Automation Project
# Installation: pip install -r requirements.txt

# ========================================
# CORE DEPENDENCIES (обязательные)
# ========================================

# PDF обработка
PyMuPDF>=1.23.0  # fitz - парсинг PDF, извлечение текста, изображений, векторной графики

# Работа с изображениями
Pillow>=10.0.0  # PIL - обработка изображений, конвертация форматов

# HTTP клиент
requests>=2.31.0  # HTTP запросы к OCR микросервису

# ========================================
# OCR SERVICE DEPENDENCIES (опциональные)
# ========================================
# Необходимы только для запуска DeepSeek-OCR сервиса
# Если OCR не нужен - можно не устанавливать

# Deep Learning framework
torch>=2.0.0  # PyTorch - для работы с DeepSeek моделью и проверки CUDA

# Transformers
transformers>=4.30.0  # HuggingFace - загрузка и использование DeepSeek-VL модели

# Web framework для OCR сервиса
fastapi>=0.104.0  # FastAPI - HTTP API для OCR микросервиса
uvicorn>=0.24.0  # ASGI сервер для FastAPI
pydantic>=2.0.0  # Валидация данных

# File handling
python-multipart>=0.0.6  # Обработка multipart/form-data для загрузки файлов

# ========================================
# DEVELOPMENT DEPENDENCIES (для разработки)
# ========================================
# Раскомментируйте при необходимости

# pytest>=7.4.0  # Тестирование
# black>=23.0.0  # Форматирование кода
# flake8>=6.0.0  # Линтинг
# mypy>=1.5.0  # Проверка типов

# ========================================
# DOCUMENTATION GENERATION (для генерации DOCX)
# ========================================
# Эти зависимости устанавливаются отдельно через apt-get:
#
# ОБЯЗАТЕЛЬНО для автоматической генерации DOCX из MD:
#   sudo apt-get update
#   sudo apt-get install -y pandoc
#
# Проверка установки:
#   which pandoc && pandoc --version
#
# Если pandoc не установлен:
#   - Пайплайн будет работать нормально (graceful degradation)
#   - Выведется предупреждение: "⚠️ pandoc не установлен - пропускаем генерацию DOCX"
#   - DOCX копии не будут созданы (останутся только MD файлы)
#
# Почему DOCX, а не PDF:
#   ✅ Лучше обрабатывает сложные таблицы с большим количеством текста
#   ✅ Автоматический перенос и подгонка ширины колонок
#   ✅ Нет служебных символов (квадратиков) вместо Unicode
#   ✅ Редактируемый формат - можно доработать вручную
#   ✅ Можно потом экспортировать в PDF из Word/LibreOffice

# Для генерации PDF (не используется, но можно включить при необходимости):
#   sudo apt-get install -y texlive-xetex texlive-fonts-recommended
#   pandoc input.md -o output.pdf --pdf-engine=xelatex

# ========================================
# NOTES
# ========================================
# 
# Минимальная установка (без OCR):
#   pip install PyMuPDF Pillow requests
#
# Полная установка (с OCR):
#   pip install -r requirements.txt
#
# Для работы OCR также потребуется:
#   - CUDA-совместимая GPU (для ускорения)
#   - ~15 GB свободной памяти для модели DeepSeek-VL
#   - Автоматическая проверка: пайплайн сам определит наличие GPU
#
# Для генерации DOCX документации:
#   sudo apt-get install pandoc
#
# Автоматическая конвертация MD → DOCX:
#   - Выполняется автоматически в конце пайплайна
#   - Препроцессинг: замена emoji, спецсимволов, исправление переносов
#   - TOC (оглавление) для Pipeline и документации
#   - Graceful degradation: работает без pandoc (с предупреждением)

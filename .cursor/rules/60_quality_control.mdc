---
description: Quality control checklists, validation criteria, examples
globs:
  - "output/**"
  - "output2/**"
alwaysApply: false
---

# Качество и контроль

## Критерии качества результата

### BPMN файл считается правильным, если:
1. Открывается в Camunda Modeler без ошибок
2. Все элементы видны на диаграмме
3. Структура соответствует исходному документу
4. Связи между элементами логичны и полны
5. Lanes организованы по ролям/подразделениям

### MD файл считается правильным, если:
1. Названия элементов совпадают с BPMN
2. Таблицы структурированы и читаемы
3. Включены все детали: сроки, ответственные, условия
4. Есть ссылки на пункты регламента
5. Легко найти описание любого элемента процесса

## Чеклист для каждого процесса

### Этап -1: Предварительный анализ (для документов >50 стр.)
- [ ] Анализ уровней вложенности
- [ ] Определена архитектура BPMN (2/3/4-уровневая)
- [ ] Карта детализации (SubProcess/Task для каждого X.Y)
- [ ] Оценка времени сообщена пользователю
- [ ] ПОЛУЧЕНО СОГЛАСИЕ ПОЛЬЗОВАТЕЛЯ
- [ ] Валидация RACI vs OCR
- [ ] Все расхождения устранены

### Этап 0: Архитектурный анализ (для программных компонентов)
- [ ] Анализ архитектуры решения
- [ ] Определены компоненты и модули
- [ ] Выявлены зависимости
- [ ] ПОЛУЧЕНО СОГЛАСИЕ ПОЛЬЗОВАТЕЛЯ
- [ ] Соблюдены SOLID/KISS/DRY

### Этап 1: Анализ и структурирование
- [ ] Анализ исходных документов
- [ ] Определен тип и границы процесса
- [ ] Предложена структура
- [ ] ПОЛУЧЕНО СОГЛАСИЕ ПОЛЬЗОВАТЕЛЯ
- [ ] Для больших документов: использована карта детализации

### Этап 2: RACI матрица
- [ ] Создан файл `[Процесс]_RACI.md`
- [ ] Матрица содержит все activities
- [ ] Определены все роли (R, A, C, I)
- [ ] Pool и Lanes согласованы с пользователем

### Этап 3: Текстовый пайплайн
- [ ] Создан файл `[Процесс]_Pipeline.md`
- [ ] Каждый activity описан по 7 пунктам
- [ ] Указаны способы передачи данных
- [ ] Указано время исполнения
- [ ] Определены метрики
- [ ] Создан сводный пайплайн

### Этап 4: BPMN и документация
- [ ] Создан файл `[Процесс].bpmn`
- [ ] Создан файл `[Процесс].md` (то же имя!)
- [ ] Все namespace объявлены
- [ ] Структура: definitions -> collaboration -> process
- [ ] LaneSet с корректными flowNodeRef
- [ ] Каждый SubProcess имеет минимум 1 lane
- [ ] Lanes визуализированы в BPMNDiagram
- [ ] Координаты задач внутри границ lanes
- [ ] Каждый элемент имеет BPMNShape
- [ ] Каждый flow имеет BPMNEdge с waypoints
- [ ] Нет дублирующих тегов
- [ ] Автоматические проверки:
  - [ ] check_bpmn.sh — exit code 0
  - [ ] check_raci_bpmn.sh — exit code 0
  - [ ] quick_check_bpmn.sh — exit code 0
- [ ] Файл открывается в Camunda Modeler
- [ ] Все элементы видны на диаграмме
- [ ] Drill-down в SubProcess работает
- [ ] Названия в MD соответствуют BPMN
- [ ] Старые версии в archive/

### Финальная проверка DOCX
- [ ] Созданы DOCX копии всех MD файлов
- [ ] Все DOCX читаемы и корректны
- [ ] Таблицы не обрезаны
- [ ] Русский текст отображается корректно

### Связь файлов
- [ ] Все файлы имеют связанное базовое имя
- [ ] Легко найти все материалы по процессу

## Примеры успешных проектов

### Простой процесс (2-уровневая архитектура)
- `archive/Жизненный_цикл_договора_1.bpmn` — 18 элементов, 6 lanes

### Большой документ (4-уровневая архитектура)
- `output/КД-ДП-Б7-008/КД-ДП-Б7-008.bpmn` — 91 страница, 276 задач, 51 BPMNDiagram, 16 часов работы

**При любых сомнениях — проверить в Camunda Modeler!**

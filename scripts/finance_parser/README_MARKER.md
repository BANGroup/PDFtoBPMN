# üî• Marker PDF –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞

## –ß—Ç–æ —Ç–∞–∫–æ–µ Marker?

**Marker** - —ç—Ç–æ open-source –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ PDF –≤ Markdown —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- ‚úÖ **–ü–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É** –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–æ–ª–æ–Ω–∫–∏)
- ‚úÖ **–í 10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ Nougat**
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç offline** (–ª–æ–∫–∞–ª—å–Ω–æ, –±–µ–∑ API)
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (—Ç–∞–±–ª–∏—Ü—ã, –≤—ã–¥–µ–ª–µ–Ω–∏—è)

**GitHub:** [VikParuchuri/marker](https://github.com/VikParuchuri/marker)

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
cd /home/budnik_an/Obligations
source DeepSeek-OCR/venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å marker-pdf (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!)
pip install marker-pdf
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
marker_single --help
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: CLI (–∫–æ–º–∞–Ω–¥–∞ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)

```bash
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—Å—å PDF
marker_single "input/Finance/–í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020.pdf" \
  --output_dir output/finance

# –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–∞–Ω–∏—Ü
marker_single "input/Finance/–í—ã–ø—É—Å–∫ 4-01 –Ω–∞ 29.07.19.pdf" \
  --page_range 0,1,2,3,4 \
  --output_dir output/finance

# –ë–µ–∑ OCR (–¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö PDF, –±—ã—Å—Ç—Ä–µ–µ)
marker_single "input/Finance/–¥–æ–∫—É–º–µ–Ω—Ç.pdf" \
  --disable_ocr \
  --output_dir output/finance
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Python API

```python
from pathlib import Path
from scripts.finance_parser.marker_processor import MarkerProcessor

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
processor = MarkerProcessor()

# –û–±—Ä–∞–±–æ—Ç–∫–∞ PDF
result = processor.process_pdf(
    pdf_path=Path("input/Finance/–í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020.pdf"),
    output_dir=Path("output/finance"),
    page_range="0,1,2",  # –ü–µ—Ä–≤—ã–µ 3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    disable_ocr=False,   # –í–∫–ª—é—á–∏—Ç—å OCR
    verbose=True
)

print(f"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: {result['md_file']}")

# –ò–ª–∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç
markdown_text = processor.process_and_read(
    pdf_path=Path("input/Finance/–¥–æ–∫—É–º–µ–Ω—Ç.pdf"),
    output_dir=Path("output/finance")
)
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

Marker —Å–æ–∑–¥–∞–µ—Ç 2 —Ñ–∞–π–ª–∞:

1. **`[–ù–∞–∑–≤–∞–Ω–∏–µ].md`** - Markdown —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º PDF
2. **`[–ù–∞–∑–≤–∞–Ω–∏–µ]_meta.json`** - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```
output/finance/–í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020/
‚îú‚îÄ‚îÄ –í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020.md          # Markdown (18KB)
‚îî‚îÄ‚îÄ –í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020_meta.json   # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (9KB)
```

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ pipeline.py

### –ó–∞–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ OCR –Ω–∞ Marker

–û–±–Ω–æ–≤–∏—Ç–µ `pipeline.py`:

```python
from .marker_processor import MarkerProcessor
from .md_parser import MDParser

class FinanceParserPipeline:
    def __init__(self, use_marker: bool = True):
        self.use_marker = use_marker
        
        if use_marker:
            self.marker = MarkerProcessor()
            self.md_parser = MDParser()
        else:
            # –°—Ç–∞—Ä—ã–π OCR –ø–æ–¥—Ö–æ–¥
            self.ocr_url = "http://localhost:8000/ocr/figure"
            # ...
    
    def process_pdf(self, pdf_path: Path, output_xlsx: Path) -> ValidationReport:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ PDF —Å –≤—ã–±–æ—Ä–æ–º –º–µ—Ç–æ–¥–∞"""
        
        if self.use_marker:
            # üÜï –ù–û–í–´–ô –ü–û–î–•–û–î: Marker ‚Üí MD ‚Üí –ø–∞—Ä—Å–∏–Ω–≥
            print("üîÑ –®–ê–ì 1: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF —á–µ—Ä–µ–∑ Marker")
            
            temp_md_dir = pdf_path.parent.parent / "output" / "finance"
            markdown = self.marker.process_and_read(pdf_path, temp_md_dir)
            
            print("üîÑ –®–ê–ì 2: –ü–∞—Ä—Å–∏–Ω–≥ Markdown")
            # –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä—Å–µ—Ä MD
            records = self.md_parser.parse_md_content(markdown)
            
        else:
            # –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Üí PNG ‚Üí OCR
            # ... –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
            pass
        
        # –≠–∫—Å–ø–æ—Ä—Ç (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π)
        print("üîÑ –®–ê–ì 3: –≠–∫—Å–ø–æ—Ä—Ç –≤ XLSX")
        report = self.xlsx_exporter.export(records, output_xlsx)
        
        return report
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–¢–µ—Å—Ç –Ω–∞ "–í—ã–ø—É—Å–∫ 4-02 –Ω–∞ 16.06.2020.pdf" (3 —Å—Ç—Ä–∞–Ω–∏—Ü—ã):**

| –ú–µ—Ç–æ–¥ | –í—Ä–µ–º—è | –¢–æ—á–Ω–æ—Å—Ç—å —Ç–∞–±–ª–∏—Ü | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ |
|-------|-------|----------------|-----------|
| **Marker** | **4.8 —Å–µ–∫** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ |
| DeepSeek OCR | ~10-15 —Å–µ–∫ | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è |
| PyMuPDF native | ~0.5 —Å–µ–∫ | ‚ùå –ü–ª–æ—Ö–æ | ‚ùå –ù–µ—Ç |

**–í—ã–≤–æ–¥:** Marker - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞!

---

## üìù –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ò—Å—Ö–æ–¥–Ω—ã–π PDF:** –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç Marker:**

```markdown
| –ö–æ–¥, –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–π –Ω–æ–º–∏–Ω–∞–ª—å–Ω—ã–º –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–º | 01_17401851343 |
| –¢–∏–ø —Å—á–µ—Ç–∞ | –í–ª–∞–¥–µ–ª–µ—Ü |
| –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ | 000207885703 |
| –ü–æ—á—Ç–æ–≤–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ | –®–∞–ø—Ä–∞–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á |
| –ü–æ—á—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å | RU, 123290, –≥. –ú–æ—Å–∫–≤–∞, –®–µ–ª–µ–ø–∏—Ö–∏–Ω—Å–∫–∞—è –Ω–∞–±, –¥.10, –∫–≤.19 |

## –ë–∞–ª–∞–Ω—Å –ø–æ —Ü–µ–Ω–Ω–æ–π –±—É–º–∞–≥–µ

| –í–∏–¥ —Ü–µ–Ω–Ω–æ–π –±—É–º–∞–≥–∏ | –û–±–ª–∏–≥–∞—Ü–∏—è |
| ISIN | RU000A0JVZG5 |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —à—Ç—É–∫–∞—Ö | 50 |
```

**‚úÖ –¢–∞–±–ª–∏—Ü—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã!**  
**‚úÖ –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç –±–µ–∑ –æ—à–∏–±–æ–∫!**  
**‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!**

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Marker?

‚úÖ **–î–ê - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Marker:**
- PDF —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ (—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã, —Å–ø–∏—Å–∫–∏)
- –ü–ª–æ—Ö–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ PDF
- –ù—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- –ï—Å—Ç—å –≤—Ä–µ–º—è (~5 —Å–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)

‚ùå **–ù–ï–¢ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ native extraction:**
- –ü—Ä–æ—Å—Ç—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ PDF –±–µ–∑ —Ç–∞–±–ª–∏—Ü
- –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- PDF —É–∂–µ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "marker_single: command not found"

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source DeepSeek-OCR/venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
pip list | grep marker
```

### Marker —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --disable_ocr –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö PDF
marker_single –¥–æ–∫—É–º–µ–Ω—Ç.pdf --disable_ocr --output_dir output/

# –ò–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
marker_single –¥–æ–∫—É–º–µ–Ω—Ç.pdf --page_range 0-5 --output_dir output/
```

### –ù—É–∂–µ–Ω GPU?

**–ù–µ—Ç!** Marker —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU. GPU —É—Å–∫–æ—Ä—è–µ—Ç, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Marker:**
- GitHub: https://github.com/VikParuchuri/marker
- PyPI: https://pypi.org/project/marker-pdf/

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- **Surya-OCR** (–æ—Ç —Ç–æ–≥–æ –∂–µ –∞–≤—Ç–æ—Ä–∞) - —Ç–æ–ª—å–∫–æ OCR
- **Nougat** - –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –¥–ª—è –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- **pdftext** - —Ç–æ–ª—å–∫–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ! üéâ Marker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

